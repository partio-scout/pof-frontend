window.Search=function(a,e,$){var t={};return t.cache=function(){t.$loadMoreButton=$("#search-results-loadmore"),t.$resultsContainer=$("#search-results-container"),t.$searchInput=$("#search"),t.$searchForm=$("#hero-search"),t.$resultMessageContainer=$("#results-message"),t.$maxPages=t.$loadMoreButton.data("maxpages"),t.$page=t.$loadMoreButton.data("page")},t.init=function(){t.cache(),t.$loadMoreButton.on("click",function(a){t.stop(a),t.loadMore(a)})},t.loadMore=function(){t.$loadMoreButton.disabled=!0,t.$loadMoreButton.addClass("loading"),DustPress.ajax("Search/Results",{partial:"search-results-list",success:function(a){t.loadSuccess(a)},error:function(a){t.$resultsContainer.innerHTML+="<h2>"+a+"</h2>"}})},t.loadSuccess=function(e){if(t.$page++,t.$resultsContainer.innerHTML+=e,t.$page>1&&(t.$resultMessageContainer.innerHTML="Ladattiin lis채채 tapahtumia"),t.$page<t.$maxPages&&(t.$loadMoreButton.disabled=!1,t.$loadMoreButton.innerHTML="Lataa lis채채",t.$loadMoreButton.classList.remove("loading")),a.history)if(/sivu/.test(location.pathname)){var o=location.pathname.replace(/sivu\/(\d+)/,"sivu/"+t.$page);a.history.pushState({},"Sivu",o)}else{var s="sivu/"+t.$page+"/";a.history.pushState({},"Sivu",s)}},t.stop=function(a){a.stopPropagation(),a.preventDefault()},$(e).ready(t.init),t}(window,document,jQuery);