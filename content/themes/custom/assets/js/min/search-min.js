window.Search=function(a,e,$){var t={};return t.cache=function(){t.queryString="",t.$loadMoreButton=$("#search-results-loadmore"),t.$resultsContainer=$("#search-results-container"),t.$searchInput=$("#search"),t.$searchForm=$("#hero-search"),t.$resultMessageContainer=$("#results-message"),t.$maxPages=t.$loadMoreButton.data("maxpages"),t.$page=t.$loadMoreButton.data("page")},t.init=function(){t.cache(),t.$loadMoreButton.on("click",function(a){t.stop(a),t.loadMore(a)})},t.loadMore=function(){t.$loadMoreButton.disabled=!0,t.$loadMoreButton.addClass("loading"),dp("Search/Results",{partial:"search-results-list",success:function(a){t.loadSuccess(a)},error:function(a){t.$resultsContainer.innerHTML+="<h2>"+a+"</h2>"}})},t.loadSuccess=function(e){var o=t.$page++;t.$loadMoreButton.data("page",o);var s=t.$resultsContainer.html()+e;if(t.$resultsContainer.html(s),t.$page>1&&t.$resultMessageContainer.html("Ladattiin lisää tapahtumia"),console.log("sivulla:",t.$page,"maxpages:",t.$maxPages),t.$page<t.$maxPages?(console.log("MENTIINKÖ TÄNNE"),t.$loadMoreButton.disabled=!1,t.$loadMoreButton.html("Lataa lisää"),t.$loadMoreButton.removeClass("loading")):t.$loadMoreButton.hide(),a.history)if(/sivu/.test(location.pathname)){var n=location.pathname.replace(/sivu\/(\d+)/,"sivu/"+t.$page);a.history.pushState({},"Sivu",n)}else{var r="sivu/"+t.$page+"/";a.history.pushState({},"Sivu",r)}},t.stop=function(a){a.stopPropagation(),a.preventDefault()},$(e).ready(t.init),t}(window,document,jQuery);