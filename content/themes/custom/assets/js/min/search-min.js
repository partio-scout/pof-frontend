window.Search=function(t,a,$){var e={};return e.cache=function(){e.queryString="",e.$loadMoreButton=$("#search-results-loadmore"),e.$resultsContainer=$("#search-results-container"),e.$searchInput=$("#search"),e.$searchIcon=$("#search-icon"),e.$searchForm=$("#hero-search"),e.$resultMessageContainer=$("#results-message"),e.$maxPages=e.$loadMoreButton.data("maxpages"),e.$page=e.$loadMoreButton.data("page")},e.init=function(){e.cache(),e.$loadMoreButton.on("click",function(t){e.stop(t),e.loadMore(t)}),e.$searchInput.on("keyup",function(t){if("Enter"===event.key)return e.stop(t),!1}),e.$searchIcon.on("click",function(){e.doSearch()})},e.doSearch=function(){dp("Search/Results",{args:{s:e.$searchInput.val()},partial:"search-results-list",success:function(t){e.doSearchSuccess(t)},error:function(t){var a=e.$resultsContainer.html()+"<h2>"+t+"</h2>";e.$resultsContainer.html(a)}})},e.loadMore=function(){e.$loadMoreButton.disabled=!0,e.$loadMoreButton.addClass("loading"),dp("Search/Results",{args:{load_more:!0},partial:"search-results-list",success:function(t){e.loadMoreSuccess(t)},error:function(t){var a=e.$resultsContainer.html()+"<h2>"+t+"</h2>";e.$resultsContainer.html(a)}})},e.doSearchSuccess=function(a){e.$loadMoreButton.data("page",1),e.$resultsContainer.html(a),t.history&&t.history.pushState({},"Haku",location.origin+"/haku/"+e.$searchInput.val())},e.loadMoreSuccess=function(a){var o=e.$page++;e.$loadMoreButton.data("page",o);var r=e.$resultsContainer.html()+a;if(e.$resultsContainer.html(r),e.$page>1&&e.$resultMessageContainer.html("Ladattiin lis채채 tapahtumia"),e.$page<e.$maxPages?(e.$loadMoreButton.disabled=!1,e.$loadMoreButton.html("Lataa lis채채"),e.$loadMoreButton.removeClass("loading")):e.$loadMoreButton.hide(),t.history)if(/sivu/.test(location.pathname)){var s=location.pathname.replace(/sivu\/(\d+)/,"sivu/"+e.$page);t.history.pushState({},"Sivu",s)}else{var n="sivu/"+e.$page+"/";t.history.pushState({},"Sivu",n)}},e.stop=function(t){t.stopPropagation(),t.preventDefault()},$(a).ready(e.init),e}(window,document,jQuery);